% Inspired by Evan Chen's evan.sty, see vEnhance/dotfiles/blob/master/texmf/tex/latex/evan/evan.sty

\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesFile{archit}[02/07/2020]

%%fakesection Argument Processing

	% Default arguments (setting everything false by default)

	\newif\ifarchitfancythrm\architfancythrmfalse
	\newif\ifarchitfancyprob\architfancyprobfalse
	\newif\ifarchitfancydef\architfancydeffalse
	\newif\ifarchitfancyclaim\architfancyclaimfalse
	\newif\ifarchitfancylemma\architfancylemmafalse
	\newif\ifarchitfancyex\architfancyexfalse
	\newif\ifarchitfancyrmk\architfancyrmkfalse
	\newif\ifarchitfancycorollary\architfancycorollaryfalse
	\newif\ifarchitfancyprpstn\architfancyprpstnfalse
	\newif\ifarchitfancyexer\architfancyexerfalse

	\newif\ifarchithints\archithintsfalse

	\newif\ifarchitsetup\architsetuptrue

	\newif\ifarchitbook\architbookfalse
	\newif\ifarchitchapnum\architchapnumfalse

	\newif\ifarchitthrmprbsepnum\architthrmprbsepnumfalse

	% Receive arguments

	\DeclareOption{fancythrm}{\architfancythrmtrue}
	\DeclareOption{fancyprob}{\architfancyprobtrue}
	\DeclareOption{fancydef}{\architfancydeftrue}
	\DeclareOption{fancyclaim}{\architfancyclaimtrue}
	\DeclareOption{fancylemma}{\architfancylemmatrue}
	\DeclareOption{fancyex}{\architfancyextrue}
	\DeclareOption{fancycorollary}{\architfancycorollarytrue}
	\DeclareOption{fancyprpstn}{\architfancyprpstntrue}
	\DeclareOption{fancyexer}{\architfancyexertrue}
	\DeclareOption{fancyrmk}{\architfancyrmktrue}

	\DeclareOption{fancyall}{
		\architfancydeftrue
		\architfancyprobtrue
		\architfancythrmtrue
		\architfancyclaimtrue
		\architfancylemmatrue
		\architfancyextrue
		\architfancycorollarytrue
		\architfancyprpstntrue
		\architfancyexertrue
		\architfancyrmktrue
	}

	\DeclareOption{fancystd}{
		\architfancydeffalse
		\architfancyprobtrue
		\architfancythrmtrue
		\architfancyclaimtrue
		\architfancylemmatrue
		\architfancyextrue
		\architfancycorollaryfalse
		\architfancyprpstntrue
		\architfancyexerfalse
		\architfancyrmktrue
	}

	\DeclareOption{nofancythrm}{\architfancythrmfalse}
	\DeclareOption{nofancyprob}{\architfancyprobfalse}
	\DeclareOption{nofancydef}{\architfancydeffalse}
	\DeclareOption{nofancyclaim}{\architfancyclaimfalse}
	\DeclareOption{nofancylemma}{\architfancylemmafalse}
	\DeclareOption{nofancyex}{\architfancyexfalse}
	\DeclareOption{nofancycorollary}{\architfancycorollaryfalse}
	\DeclareOption{nofancyprpstn}{\architfancyprpstnfalse}
	\DeclareOption{nofancyexer}{\architfancyexerfalse}
	
	\DeclareOption{nosetup}{\architsetupfalse}

	\DeclareOption{thrmprbsep}{\architthrmprbsepnumtrue}
	% for class `scrbook`
	\DeclareOption{book}{\architbooktrue}
	\DeclareOption{chapnum}{\architchapnumtrue}

	\ProcessOptions\relax

%%fakesection Macros And Commands

	\usepackage{amsmath,amssymb,amsthm}
	\usepackage{mathtools}

	\usepackage{bm}
	\usepackage{enumitem}
	\usepackage{hyperref}
	\usepackage{nameref,cleveref}


	% Paired delimiters

	\DeclarePairedDelimiter\norm{\lVert}{\rVert}
	\DeclarePairedDelimiter\abs{\lvert}{\rvert}
	\DeclarePairedDelimiter\ang{\langle}{\rangle}
	\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}
	\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
	\DeclarePairedDelimiter\bkt{[}{]}
	\DeclarePairedDelimiter\set{\{}{\}}

	% Math operators

	\DeclareMathOperator{\AR}{Ar}
	\DeclareMathOperator{\SGN}{sgn}
	\DeclareMathOperator{\NE}{Ne}
	\DeclareMathOperator{\DIAM}{diam}
	\DeclareMathOperator{\PROB}{Prob}
	\DeclareMathOperator{\SPAN}{span}
	\DeclareMathOperator{\DIM}{dim}
	\DeclareMathOperator{\NULL}{null}
	\DeclareMathOperator{\RANGE}{range}
	\DeclareMathOperator{\MAT}{Mat}
	\DeclareMathOperator{\KER}{ker}
	\DeclareMathOperator{\RE}{Re}
	\DeclareMathOperator{\IM}{Im}

	% Other math macros

	\newcommand{\dang}{\measuredangle}
	\newcommand{\cycsum}{\sum_{\textrm{cyc}}}
	\newcommand{\outdeg}{\deg^{+}}
	\newcommand{\indeg}{\deg^{-}}
	\newcommand{\pre}[1]{{#1}^{\textrm{pre}}}
	\newcommand{\inv}{^{-1}}
	\newcommand{\sgt}[1]{\overline{#1}}
	% \newcommand{\defeq}{\overset{\textrm{def}}{=}}
	\newcommand{\defeq}{=}
	\newcommand{\vect}[1]{\overrightharp{#1}}
	\newcommand{\normsubg}{\mathrel{\unlhd}}

	% To ease the usage of other math fonts

	\newcommand{\mbb}[1]{\mathbb #1}
	\newcommand{\mc}[1]{\mathcal #1}
	\newcommand{\mfk}[1]{\mathfrak #1}
	\newcommand{\mbf}[1]{\mathbf #1}

	% Miscellaneous Macros

	\newcommand{\gap}{\text{ }}
	\newcommand{\ttt}[1]{\texttt{#1}}
	\newcommand{\VOCAB}[1]{\textcolor{red}{\textbf{#1}}}
	\newcommand{\HLINE}[1]{\begin{center}\line(1,0){#1}\end{center}}
	\newcommand{\nhpad}{\hspace{-1em}} % stands for 'negative hints padding'

%%fakesection Main Setup

	\usepackage{thmtools}
	\usepackage[framemethod=TikZ]{mdframed}

	%%fakesubsection Useful Colors

		\usepackage{color, xcolor}
		\PassOptionsToPackage{usenames,svgnames,dvipsnames,table}{xcolor}

		\definecolor{TealBlue}{rgb}{0.21, 0.46, 0.53}
		\definecolor{MidnightBlue}{rgb}{0.1, 0.1, 0.44}
		\definecolor{Salmon}{rgb}{1.0, 0.55, 0.41}
		\definecolor{RawSienna}{rgb}{0.53, 0.18, 0.09}
		\definecolor{ForestGreen}{rgb}{0.0, 0.27, 0.13}
		\definecolor{Beige}{rgb}{0.95, 0.95, 0.95}

	%%fakesubsection Fancy Section/Chapter Headers

		\renewcommand*{\sectionformat}{\color{red}\maltese \thesection \enskip} % fancy section
		\renewcommand*{\subsectionformat}{\color{red}\maltese \thesubsection\enskip} % fancy subsection
		\renewcommand*{\subsubsectionformat}{\color{red}\maltese \thesubsubsection\enskip} % fancy subsubsection

		% taken from Napkin, fancy chapter
		\ifarchitbook
			\addtokomafont{chapterprefix}{\raggedleft}
			\RedeclareSectionCommand[beforeskip=0.5em]{chapter}
			\renewcommand*{\chapterformat}{%
				\mbox{\scalebox{1.5}{\chapappifchapterprefix{\nobreakspace}}%
				\scalebox{2.718}{\color{red}\thechapter\autodot}\enskip}}
		\fi

	%%fakesubsection Defining Fancy Environments

		\mdfdefinestyle{mdboxa}{%
			roundcorner = 4.5pt,
			linewidth=1pt,
			skipabove=12pt,
			innerbottommargin=9pt,
			skipbelow=2pt,
			linecolor=Beige!5!black,
			nobreak=true,
			backgroundcolor=Beige,
		}

		\declaretheoremstyle[
			headfont=\large\sffamily\bfseries\color{black},
			mdframed={style=mdboxa},
			headformat=\S \gap \NAME \gap \NUMBER \NOTE,
			headpunct={\\[3pt]},
			postheadspace={0pt}
		]{thmboxa}

		\mdfdefinestyle{mdboxb}{%
			linewidth=0.5pt,
			skipabove=12pt,
			frametitleaboveskip=5pt,
			frametitlebelowskip=0pt,
			skipbelow=2pt,
			frametitlefont=\bfseries,
			innertopmargin=4pt,
			innerbottommargin=8pt,
			nobreak=true,
			backgroundcolor=Beige,
			linecolor=black,
		}

		\declaretheoremstyle[
			headfont=\bfseries\color{black},
			mdframed={style=mdboxb},
			headpunct={\\[3pt]},
			postheadspace={0pt},
		]{thmboxb}

		\mdfdefinestyle{mdboxc}{%
			skipabove=8pt,
			linewidth=0.4pt,
			linecolor=black,
			backgroundcolor=Beige
		}

		\declaretheoremstyle[
			headfont=\bfseries\sffamily\color{black},
			bodyfont=\normalfont,
			spaceabove=2pt,
			spacebelow=1pt,
			mdframed={style=mdboxc},
			headpunct={ --- },
		]{thmboxc}

		\mdfdefinestyle{mdboxd}{%
			skipabove=8pt,
			linewidth=3pt,
			linecolor=white,
			topline=true,
			bottomline=false,
			leftline=false,
			rightline=false,
			backgroundcolor=Beige,
			tikzsetting={draw=black, line width=2pt, dotted}
		}

		\declaretheoremstyle[
			headfont=\bfseries,
			bodyfont=\normalfont\small,
			spaceabove=0pt,
			spacebelow=0pt,
			mdframed={style=mdboxd}
		]{thmboxd}

		\mdfdefinestyle{mdboxe}{
			skipabove=12pt,
			skipbelow=12pt,
			linewidth=2pt,
			leftline=false,
			rightline=false,
			bottomline=false,
			topline=true,
			linecolor=red,
			backgroundcolor=red!5!white
		}

		\declaretheoremstyle[
			headfont=\bfseries,
			bodyfont=\normalfont,
			spaceabove=3pt,
			spacebelow=3pt,
			mdframed={style=mdboxe},
			headpunct={\\[3pt]}
		]{thmboxe}

	%%fakesubsection Defining Math Environments
		
		\ifarchitsetup

		% Proof and solution environments

			\newenvironment{solution}[1]{\paragraph{Solution#1:}}{\hfill$\square$ \medskip}

			\renewenvironment{proof}[1]{\paragraph{Proof#1:}}{\hfill$\square$ \medskip}

		% Theorems, lemmas, claims, definitions, corollaries, propositions, problems, examples, remarks and exercises

			\ifarchitchapnum
				\newcounter{thrmcount}[chapter]
				\renewcommand{\thethrmcount}{\thechapter.\arabic{thrmcount}}
			\else
				\newcounter{thrmcount}[section]
				\renewcommand{\thethrmcount}{\thesection.\arabic{thrmcount}}
			\fi
			
			\ifarchitfancythrm
				\ifarchitchapnum
					\declaretheorem[style=thmboxa,name=Theorem,numberwithin=chapter,refname={theorem,theorems},Refname={Theorem,Theorems}]{theorem}
					\declaretheorem[style=thmboxa,name=Theorem,numbered=no]{theorem*}
				\else
					\declaretheorem[style=thmboxa,name=Theorem,numberwithin=section,refname={theorem,theorems},Refname={Theorem,Theorems}]{theorem}
					\declaretheorem[style=thmboxa,name=Theorem,numbered=no]{theorem*}
				\fi
			\else
				\newtheorem*{theorem*}{Theorem}

				\ifarchitchapnum
					\newtheorem{theorem}{Theorem}[chapter]
				\else
					\newtheorem{theorem}{Theorem}[section]
				\fi
			\fi

			\ifarchitfancylemma
				\declaretheorem[style=thmboxa,name=Lemma,sibling=theorem,refname={lemma,lemmas},Refname={Lemma,Lemmas}]{lemma}
				\declaretheorem[style=thmboxa,name=Lemma,numbered=no]{lemma*}
			\else
				\newtheorem{lemma}[theorem]{Lemma}
				\newtheorem*{lemma*}{Lemma}
			\fi

			\ifarchitfancyprob
				\declaretheorem[style=thmboxa,name=Problem,numbered=no]{problem*}

				\ifarchitthrmprbsepnum
					\ifarchitchapnum
						\declaretheorem[style=thmboxa,name=Problem,numberwithin=chapter,refname={problem,problems},Refname={Problem,Problems}]{problem}
					\else
						\declaretheorem[style=thmboxa,name=Problem,numberwithin=section,refname={problem,problems},Refname={Problem,Problems}]{problem}
					\fi
				\else
					\declaretheorem[style=thmboxa,name=Problem,sibling=theorem,refname={problem,problems},Refname={Problem,Problems}]{problem}
				\fi
			\else
				\newtheorem*{problem*}{Problem}

				\ifarchitthrmprbsepnum
					\ifarchitchapnum
						\newtheorem{problem}{Problem}[chapter]
					\else
						\newtheorem{problem}{Problem}[section]
					\fi
				\else
					\newtheorem{problem}[theorem]{Problem}
				\fi
			\fi
						
			\ifarchitfancydef
				\declaretheorem[style=thmboxe,name=Definition,sibling=theorem]{definition}
				\declaretheorem[style=thmboxe,name=Definition,numbered=no]{definition*}
			\else
				\theoremstyle{definition}
				\newtheorem{definition}[theorem]{Definition}
				\newtheorem*{definition*}{Definition}
			\fi

			\ifarchitfancyclaim
				\declaretheorem[style=thmboxc,name=Claim,sibling=theorem]{claim}
				\declaretheorem[style=thmboxc,name=Claim,numbered=no]{claim*}

			\else
				\theoremstyle{plain}
				\newtheorem{claim}[theorem]{Claim}
				\newtheorem*{claim*}{Claim}
			\fi

			\ifarchitfancyex
				\declaretheorem[style=thmboxb,name=Example,sibling=theorem,refname={example,examples},Refname={Example,Examples}]{example}
				\declaretheorem[style=thmboxb,name=Example,numbered=no]{example*}

			\else
				\newtheorem{example}[thrmcount]{Example}
				\newtheorem*{example*}{Example}
			\fi

			\ifarchitfancycorollary
				\declaretheorem[style=thmboxa,name=Corollary,sibling=theorem,refname={corollary,corollaries},Refname={Corollary,Corollaries}]{corollary}
				\declaretheorem[style=thmboxa,name=Corollary,numbered=no]{corollary*}
			\else
				\newtheorem{corollary}[theorem]{Corollary}
				\newtheorem*{corollary*}{Corollary}
			\fi

			\ifarchitfancyprpstn
				\declaretheorem[style=thmboxa,name=Proposition,sibling=theorem,refname={proposition,propositions},Refname={Proposition,Propositions}]{proposition}
				\declaretheorem[style=thmboxa,name=Proposition,numbered=no]{proposition*}
			\else
				\newtheorem{proposition}[theorem]{Proposition}
				\newtheorem*{proposition*}{Proposition}
			\fi

			\ifarchitfancyexer
				\declaretheorem[style=thmboxd,name=Exercise,sibling=theorem,refname={exercise,exercises},Refname={Exercise,Exercises}]{exercise}
			\else
				\newtheorem{exercise}[theorem]{Exercise}
			\fi

			\ifarchitfancyrmk
				\declaretheorem[style=thmboxd,name=Remark,sibling=theorem]{remark}
				\declaretheorem[style=thmboxd,name=Remark,numbered=no]{remark*}
			\else
				\newtheorem{remark}[theorem]{Remark}
				\newtheorem*{remark*}{Remark}
			\fi

		\fi

\endinput
